# 性能相关指标

## ANR 发生率
### 唤醒锁
唤醒锁是一种机制，用于指示应用程序需要让设备保持打开状态。任何使用WakeLock的应用程序都必须请求android。准许应用程序清单的`<uses permission>`元素中的`WAKE_LOCK`权限。通过调用`newWakeLock（int，String）`获取唤醒锁。
调用`acquire（）`获取唤醒锁，并强制设备保持在创建唤醒锁时请求的级别。
当您完成并且不再需要锁时，调用`release（）`。尽快这样做非常重要，以避免过度消耗设备电池。




## 崩溃率
## 唤醒次数过多
## 部分唤醒锁定被卡住

## 卡顿
> UI呈现是指从应用生成帧并将其显示在屏幕上的动作。要确保用户能够流畅地与您的应用互动，应用呈现每帧的时间不应超过 16ms，以达到60fps。如果UI呈现时间>16.7，系统会不得不跳过一些帧，这会导致用户感觉您的应用不流畅,这就叫卡顿

### 常见的卡顿来源
1. 可滚动列表：
	*  a. RecyclerView：notifyDataSetChanged   列表局部更新 误用notifyDataSetChanged()、setAdapter(Adapter) 或 swapAdapter(Adapter, boolean)  导致 RV FullInvalidate。 应改用 SortedList 或 DiffUtil，以便在内容发生更改或添加了内容时生成最少量的更新。
	*  b. RecyclerView：嵌套的 RecyclerView  子RecyclerView需要共享 RecyclerView.RecycledViewPool
	*  c. RecyclerView：膨胀过多/创建过程用时过长
	*  d. RecyclerView：绑定用时过长
	*  e. RecyclerView 或 ListView：布局 / 绘制用时过长
	*  f. ListView：填充视图
2. 布局性能：
3. 渲染性能：
4. 线程调度延迟：
5. 对象分配和GC：


## 后台 Wi-Fi 扫描次数过多
## 后台网络使用量过高
## 应用启动时间
## 呈现速度缓慢
## 冻结的帧
## 权限遭拒

# 内存
# 电量
# 包体积


### 应用待机存储分区
Android 9（API 级别 28）引入了新的电池管理功能：应用待机存储分区
系统会动态地将每个应用分配到优先级存储分区，并根据需要重新分配应用。
系统可能依赖于某个预加载的应用，该应用使用机器学习判断每个应用将被使用的可能性，并将应用分配到相应的存储分区。
如果设备上没有该系统应用，则系统会默认根据应用的使用时间新近度对应用进行排序。
系统会将更活跃的应用分配到赋予应用更高优先级的存储分区，为应用提供更多系统资源。具体而言，存储分区决定了应用的作业运行频率，应用可以触发警报的频率以及应用可以接收高优先级 Firebase 云消息传递消息的频率。这些限制仅适用于设备使用电池供电的情况；在设备充电期间，系统不会对应用施加这些限制。

查看 UsageStatsManager.getAppStandbyBucket() 查明其当前所在的存储分区。

1. 活跃：应用目前正在使用中，或者最近刚刚使用过
2. 工作集：应用会定期使用
3. 常用：应用会经常使用，但不会每天使用
4. 极少使用：应用不经常使用